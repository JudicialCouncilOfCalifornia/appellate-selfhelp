(function(b,a){b(document).on("idppointers.setup_done",function(f,d){f.stopImmediatePropagation();a.setPlugin(d)});b(document).on("idppointers.current_ready",function(d){d.stopImmediatePropagation();a.openPointer()});a.js_pointers={};a.first_pointer=false;a.current_pointer=false;a.last_pointer=false;a.visible_pointers=[];a.hasNext=function(d){return typeof d.next==="string"&&d.next!==""&&typeof a.js_pointers[d.next].data!=="undefined"&&typeof a.js_pointers[d.next].data.id==="string"};a.isVisible=function(d){return b.inArray(d.id,a.visible_pointers)!==-1};a.getPointerData=function(e){var d=b(e.anchor_id);if(b.inArray(e.id,a.visible_pointers)!==-1){return{target:d,data:e}}d=false;while(a.hasNext(e)&&!a.isVisible(e)){e=a.js_pointers[e.next].data;if(a.isVisible(e)){d=b(e.anchor_id)}}return a.isVisible(e)?{target:d,data:e}:{target:false,data:false}};a.setPlugin=function(d){if(!c(d)){jQuery("#overlay").show()}if(typeof a.last_pointer==="object"){a.last_pointer.pointer("destroy");a.last_pointer=false}jQuery(d.anchor_id).css({"z-index":"10",position:"relative"});a.current_pointer=false;var e=a.getPointerData(d);if(!e.target||!e.data){return}$target=e.target;d=e.data;$pointer=$target.pointer({content:d.title+d.content,position:{edge:d.edge,align:d.align},close:function(){jQuery(d.anchor_id).css("z-index","0");jQuery("#overlay").hide();b.post(ajaxurl,{pointer:d.id,action:"dismiss-wp-pointer"})}});a.current_pointer={pointer:$pointer,data:d};b(document).trigger("idppointers.current_ready")};a.openPointer=function(){var d=a.current_pointer.pointer;if(!typeof d==="object"){return}b("html, body").animate({scrollTop:d.offset().top-120},300,function(){a.last_pointer=d;var e=d.pointer("widget");a.setNext(e,a.current_pointer.data);d.pointer("open")})};a.setNext=function(i,h){if(typeof i==="object"){var e=i.find(".wp-pointer-buttons").eq(0);var g=e.find("a.close").eq(0);$button=g.clone(true,true).removeClass("close");$registerButton=g.clone(true,true).removeClass("close");e.find("a.close").remove();$button.addClass("button").addClass("button-primary");$registerButton.addClass("button").addClass("button-primary");$registerButton.css({"margin-right":"35%"});$closeIcon=g.clone(true,true).removeClass("close");e.find("a.close").remove();$closeIcon.addClass("button").addClass("button-primary").addClass("mo-visual-tour-close");has_next=false;if(a.hasNext(h)){has_next_data=a.getPointerData(a.js_pointers[h.next].data);has_next=has_next_data.target&&has_next_data.data}$closeIcon.html('<span class="dashicons dashicons-dismiss"></span>').appendTo(e);jQuery($closeIcon).click(function(j){b.ajax({type:"POST",url:ajaxurl,data:{pointer:h.id,action:"dismiss-wp-pointer"},async:false});while(a.hasNext(h)){h=a.js_pointers[h.next].data;b.ajax({type:"POST",url:ajaxurl,data:{pointer:h.id,action:"dismiss-wp-pointer"},async:false})}jQuery(h.anchor_id).css("z-index","0");jQuery("#overlay").hide();a.setPlugin({})});var d=has_next?a.next_label:a.close_label;var f="Register";if(h.anchor_id=="#freeUpgrade"){$registerButton.html(f).appendTo(e)}else{$button.html(d).appendTo(e)}jQuery($button).click(function(j){if(a.hasNext(h)){a.setPlugin(a.js_pointers[h.next].data)}});jQuery($registerButton).click(function(j){window.location.href=a.registerURL})}};b(a.pointers).each(function(e,f){if(!b().pointer){return}a.js_pointers[f.id]={data:f};var d=b(f.anchor_id);if(d.length&&d.is(":visible")){a.visible_pointers.push(f.id);if(!a.first_pointer){a.first_pointer=f}}if(e===(a.pointers.length-1)&&a.first_pointer){b(document).trigger("idppointers.setup_done",a.first_pointer)}});function c(e){for(var d in e){if(e.hasOwnProperty(d)){return false}}return true}})(jQuery,idppointers);